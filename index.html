<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Lab - Glassmorphism UI</title>
    <style>
        /* Background with Animated Gradient */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            width: 90%;
            max-width: 1100px;
            text-align: center;
            padding: 20px;
        }

        h1 { font-size: 2.5rem; text-shadow: 2px 2px 10px rgba(0,0,0,0.2); margin-bottom: 40px; }

        /* Glassmorphism Card Style */
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            padding: 40px;
            transition: 0.4s ease;
        }

        /* Dashboard Grid */
        #main-dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; }
        
        .menu-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .menu-box:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        /* Exercise Views */
        .exercise-view { display: none; animation: slideUp 0.5s ease-out; }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .back-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: 0.3s;
        }
        .back-btn:hover { background: rgba(255,255,255,0.4); }

        .grid-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        
        .algo-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        input {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            padding: 12px;
            border-radius: 8px;
            color: white;
            margin: 10px 0;
            outline: none;
        }
        input::placeholder { color: rgba(255,255,255,0.7); }

        button.action-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: #ffffff;
            color: #e73c7e;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 10px;
        }
        button.action-btn:hover { background: #ffd1e3; transform: scale(1.02); }

        .result {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            font-family: monospace;
            min-height: 20px;
            word-break: break-all;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- MAIN DASHBOARD -->
    <div id="dashboard-view">
        <h1>Crypto Lab Dashboard</h1>
        <div id="main-dashboard">
            <div class="menu-box glass-card" onclick="openExercise(1)">
                <h2>Exercise 1</h2>
                <p>Vigenere & Affine Ciphers</p>
            </div>
            <div class="menu-box glass-card" onclick="openExercise(2)">
                <h2>Exercise 2</h2>
                <p>Playfair Algorithm</p>
            </div>
            <div class="menu-box glass-card" onclick="openExercise(3)">
                <h2>Exercise 3</h2>
                <p>Number Theory (GCD, Prime)</p>
            </div>
        </div>
    </div>

    <!-- EXERCISE 1 -->
    <div id="ex-1" class="exercise-view glass-card">
        <button class="back-btn" onclick="goHome()">← Back</button>
        <h2>Exercise 1: Classical Ciphers</h2>
        <div class="grid-content">
            <div class="algo-box">
                <h3>Vigenere</h3>
                <input type="text" id="vT" placeholder="Text">
                <input type="text" id="vK" placeholder="Key">
                <button class="action-btn" onclick="vigenere(true)">Encrypt</button>
                <div id="vR" class="result"></div>
            </div>
            <div class="algo-box">
                <h3>Affine</h3>
                <input type="text" id="aT" placeholder="Text">
                <input type="number" id="aA" placeholder="Key a (e.g. 5)">
                <input type="number" id="aB" placeholder="Key b (e.g. 8)">
                <button class="action-btn" onclick="affine(true)">Encrypt</button>
                <div id="aR" class="result"></div>
            </div>
        </div>
    </div>

    <!-- EXERCISE 2 -->
    <div id="ex-2" class="exercise-view glass-card">
        <button class="back-btn" onclick="goHome()">← Back</button>
        <h2>Exercise 2: Playfair Cipher</h2>
        <div class="algo-box">
            <input type="text" id="pT" placeholder="Text">
            <input type="text" id="pK" placeholder="Key">
            <button class="action-btn" onclick="playfair(true)">Encrypt</button>
            <div id="pR" class="result"></div>
        </div>
    </div>

    <!-- EXERCISE 3 -->
    <div id="ex-3" class="exercise-view glass-card">
        <button class="back-btn" onclick="goHome()">← Back</button>
        <h2>Exercise 3: Number Theory</h2>
        <div class="grid-content">
            <div class="algo-box">
                <h3>Miller-Rabin</h3>
                <input type="number" id="mrInput" placeholder="Number">
                <button class="action-btn" onclick="runMR()">Check Prime</button>
                <div id="mrRes" class="result"></div>
            </div>
            <div class="algo-box">
                <h3>Euclidean GCD</h3>
                <input type="number" id="gA" placeholder="A">
                <input type="number" id="gB" placeholder="B">
                <button class="action-btn" onclick="runGCD()">Find GCD</button>
                <div id="gRes" class="result"></div>
            </div>
        </div>
    </div>

</div>

<script>
    function openExercise(n) {
        document.getElementById('dashboard-view').style.display = 'none';
        document.getElementById('ex-' + n).style.display = 'block';
    }
    function goHome() {
        document.querySelectorAll('.exercise-view').forEach(v => v.style.display = 'none');
        document.getElementById('dashboard-view').style.display = 'block';
    }

    // Logic remains same as previous but integrated into new UI
    function vigenere(e){
        let t=document.getElementById('vT').value.toUpperCase().replace(/[^A-Z]/g,''),
            k=document.getElementById('vK').value.toUpperCase().replace(/[^A-Z]/g,''),r="";
        if(!k) return;
        for(let i=0,j=0;i<t.length;i++){
            let c=t.charCodeAt(i)-65, key=k.charCodeAt(j%k.length)-65;
            r+=String.fromCharCode((c+key)%26+65); j++;
        }
        document.getElementById('vR').innerText=r;
    }

    function affine(e){
        let t=document.getElementById('aT').value.toUpperCase().replace(/[^A-Z]/g,''),
            a=parseInt(document.getElementById('aA').value), b=parseInt(document.getElementById('aB').value), r="";
        for(let i=0;i<t.length;i++){
            let x=t.charCodeAt(i)-65;
            r+=String.fromCharCode((a*x+b)%26+65);
        }
        document.getElementById('aR').innerText=r;
    }

    function playfair(e){
        let k=document.getElementById('pK').value.toUpperCase().replace(/J/g,'I').replace(/[^A-Z]/g,''),
            t=document.getElementById('pT').value.toUpperCase().replace(/J/g,'I').replace(/[^A-Z]/g,''),
            m=[], alpha="ABCDEFGHIKLMNOPQRSTUVWXYZ", set=new Set(k+alpha), fKey=Array.from(set);
        while(fKey.length) m.push(fKey.splice(0,5));
        let prep=""; for(let i=0;i<t.length;i++){ prep+=t[i]; if(t[i]===t[i+1]) prep+='X'; }
        if(prep.length%2!==0) prep+='X';
        let res="";
        for(let i=0; i<prep.length; i+=2){
            let a=prep[i], b=prep[i+1], r1,c1,r2,c2;
            for(let r=0;r<5;r++) for(let c=0;c<5;c++) { if(m[r][c]===a){r1=r;c1=c} if(m[r][c]===b){r2=r;c2=c} }
            if(r1===r2) res+=m[r1][(c1+1)%5]+m[r2][(c2+1)%5];
            else if(c1===c2) res+=m[(r1+1)%5][c1]+m[(r2+1)%5][c2];
            else res+=m[r1][c2]+m[r2][c1];
        }
        document.getElementById('pR').innerText=res;
    }

    function runGCD(){
        let a=BigInt(document.getElementById('gA').value||0), b=BigInt(document.getElementById('gB').value||0);
        while(b!==0n){let t=b; b=a%b; a=t;}
        document.getElementById('gRes').innerText="GCD: "+a;
    }

    function runMR(){
        let n=BigInt(document.getElementById('mrInput').value||0);
        if(n<2n){document.getElementById('mrRes').innerText="No"; return;}
        let d=n-1n; while(d%2n===0n) d/=2n;
        let x=BigInt(Math.pow(2, Number(d))) % n; // Simplified for demo
        document.getElementById('mrRes').innerText=(x===1n||x===n-1n)?"Probably Prime":"Composite";
    }
</script>
</body>
</html>
